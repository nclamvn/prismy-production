@tailwind base;
@tailwind components;
@tailwind utilities;

/* UI/UX Polish Sprint - Phase 1.2: Conditional v2 Token Loading */
/* Import v2 tokens and components when UI v2 is enabled */
@import './tokens-v2.css';
@import './components-v2.css';

/* Design Token CSS Variables - Generated automatically by Tailwind plugins
 * Light mode variables are set in :root
 * Dark mode variables are set in .dark
 * Variables include all colors, spacing, layout dimensions, component sizes
 */

/* Additional font variables for Next.js font optimization */
:root {
  --font-sans: var(--font-inter), ui-sans-serif, system-ui, sans-serif;
  --font-mono: var(--font-jetbrains-mono), ui-monospace, Menlo, monospace;
}

/* Base styles for NotebookML-inspired design */
@layer base {
  html {
    font-family: var(--font-sans);
    /* Smooth color transitions for theme switching */
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  body {
    background-color: var(--color-bg-default);
    color: var(--color-text-primary);
    font-feature-settings:
      'rlig' 1,
      'calt' 1;
    /* Smooth theme transitions */
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  /* Focus styles using CSS variables */
  *:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px var(--color-border-focus);
    border-radius: var(--radius-sm);
  }

  /* Mobile-specific fixes */
  @media (max-width: 768px) {
    /* Prevent horizontal overflow */
    body {
      overflow-x: hidden;
    }
    
    /* Ensure containers don't exceed viewport */
    .container-content {
      padding-left: var(--spacing-3);
      padding-right: var(--spacing-3);
    }
    
    /* Fix mobile sidebar overlay positioning */
    .mobile-sidebar-overlay {
      position: fixed;
      top: var(--layout-topbar-height);
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 50;
    }
  }

  /* Scrollbar styling with theming support */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background-color: var(--color-bg-muted);
  }

  ::-webkit-scrollbar-thumb {
    background-color: var(--color-border-default);
    border-radius: var(--radius-full);
    transition: background-color 0.2s ease;
  }

  ::-webkit-scrollbar-thumb:hover {
    background-color: var(--color-border-focus);
  }

  /* Dark mode scrollbar adjustments */
  .dark ::-webkit-scrollbar-track {
    background-color: var(--color-bg-muted);
  }

  .dark ::-webkit-scrollbar-thumb {
    background-color: var(--color-border-default);
  }

  .dark ::-webkit-scrollbar-thumb:hover {
    background-color: var(--color-border-focus);
  }
}

/* Component patterns with CSS variables for theming */
@layer components {
  /* Content container */
  .container-content {
    max-width: 1440px;
    margin-left: auto;
    margin-right: auto;
    padding-left: var(--spacing-4);
    padding-right: var(--spacing-4);
  }

  /* Workspace layout grids with responsive behavior */
  .workspace-grid-full {
    display: grid;
    grid-template-columns: var(--layout-sidebar-width) 1fr var(--layout-agent-pane-width);
    height: 100vh;
  }

  .workspace-grid-main {
    display: grid;
    grid-template-columns: var(--layout-sidebar-width) 1fr;
    height: 100vh;
  }

  .workspace-grid-collapsed {
    display: grid;
    grid-template-columns: var(--layout-sidebar-collapsed) 1fr var(--layout-agent-pane-width);
    height: 100vh;
  }

  .workspace-grid-mobile {
    display: grid;
    grid-template-columns: 1fr;
    height: 100vh;
  }

  /* Marketing grid */
  .marketing-grid {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    gap: var(--spacing-6);
  }

  /* Workspace semantic components */
  .workspace-panel {
    background-color: var(--color-workspace-panel);
    border: 1px solid var(--color-workspace-border);
    border-radius: var(--radius-lg);
    transition: background-color 0.3s ease, border-color 0.3s ease;
  }

  .workspace-sidebar {
    background-color: var(--color-workspace-sidebar);
    border-right: 1px solid var(--color-workspace-border);
    transition: background-color 0.3s ease, border-color 0.3s ease;
  }

  .workspace-topbar {
    height: var(--layout-topbar-height);
    background-color: var(--color-workspace-panel);
    border-bottom: 1px solid var(--color-workspace-divider);
    transition: background-color 0.3s ease, border-color 0.3s ease;
  }

  /* Component utilities using design tokens */
  .upload-dropzone {
    height: var(--component-upload-dropzone-height);
    border-radius: var(--radius-2xl);
    border: 2px dashed var(--color-workspace-border);
    background-color: var(--color-workspace-dropzone);
    transition: all 0.2s ease;
  }

  .upload-dropzone.active {
    background-color: var(--color-workspace-dropzone-active);
    border-color: var(--color-border-focus);
  }

  .job-card {
    height: var(--component-job-card-height);
    padding: var(--component-job-card-padding);
    border-radius: var(--radius-lg);
    background-color: var(--color-workspace-panel);
    border: 1px solid var(--color-workspace-border);
    transition: all 0.2s ease;
  }

  .job-card:hover {
    background-color: var(--color-workspace-hover);
  }

  .output-chip {
    height: var(--component-output-chip-height);
    padding: var(--component-output-chip-padding);
    border-radius: var(--radius-full);
    background-color: var(--color-workspace-panel);
    border: 1px solid var(--color-workspace-border);
    transition: all 0.2s ease;
  }

  /* Elevation utilities */
  .elevation-sm {
    box-shadow: var(--elevation-sm);
  }

  .elevation-md {
    box-shadow: var(--elevation-md);
  }

  .elevation-lg {
    box-shadow: var(--elevation-lg);
  }

  .elevation-xl {
    box-shadow: var(--elevation-xl);
  }

  /* Prism gradient animation for hero */
  @keyframes prism {
    0% { background-position: 0% 50% }
    100% { background-position: 100% 50% }
  }

  .prism-gradient {
    background-image: linear-gradient(90deg, red, orange, yellow, lime, cyan, indigo, violet, red);
    background-size: 800% 100%;
  }

  .animate-gradient {
    animation: prism 6s linear infinite;
  }
}
